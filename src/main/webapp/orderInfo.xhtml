<?xml version = '1.0' encoding = 'UTF-8' ?>
<html xmlns = "http://www.w3.org/1999/xhtml"
      xmlns:h = "http://java.sun.com/jsf/html"
      xmlns:f = "http://java.sun.com/jsf/core"
      xmlns:ui = "http://java.sun.com/jsf/facelets"
      xmlns:a4j = "http://richfaces.org/a4j"
      xmlns:rich = "http://richfaces.org/rich">

<h:outputStylesheet>
    .col1,
    .wform td {
        vertical-align: top;
    }

    .col2 {
        float: right;
    }

    .wizard {
        width: 400px;
    }

    .wfcol1 {
        text-align: right;
        white-space: nowrap;
    }

    .s1row td {
        height: 30px;
    }

    .navPanel {
        position: absolute;
        bottom: 0;
        height: 30px;
        margin: 0;
        padding: 2px;
    }
</h:outputStylesheet>


    <h:head>
        <title>#{msg['application.name']}</title>
    </h:head>

    <h:body>
        <h:form>

            <div style="position: relative; display: inline-block" >

                <rich:panel header="#{msg['yourOrder']}">

                    <rich:dataTable value = "#{orderManager.order.orderPositions}" var = "orderPosition">

                        <rich:column>
                            <f:facet name = "header">#{msg['name']}</f:facet>
                            <h:outputText value = "#{orderPosition.coffee.name}"/>
                        </rich:column>

                        <rich:column>
                            <f:facet name = "header">#{msg['price']}</f:facet>
                            <h:outputText value = "#{orderPosition.coffee.price}"/>
                        </rich:column>

                        <rich:column>
                            <f:facet name="header">#{msg['quantity']}</f:facet>
                            <h:outputText value="#{orderPosition.numberOfCups}"/>
                        </rich:column>

                        <rich:column>
                            <f:facet name="header">#{msg['total']}</f:facet>
                            <h:outputText value="#{orderPosition.orderPositionPrice}"/>
                        </rich:column>

                    </rich:dataTable>

                    <!--<div style="float: right;" >-->
                        <h:outputText style="float: right; font-size: large" value="#{msg['sum']}: #{orderManager.orderPositionsPrice}"/>
                        <br/>
                        <h:outputText style="float: right; font-size: large" value="#{msg['delivery']}: #{orderManager.orderPositionsPrice lt orderManager.x ? orderManager.deliveryPrice : msg['free']}"/>
                        <br/>
                        <h:outputText style="float: right; font-size: large" value="#{msg.total}: #{orderManager.order.price}"/>
                        <br/>
                        <br/>
                    <!--</div>-->
                </rich:panel>

                <rich:panel header="#{msg['delivery']}">
                    <h:panelGrid rowClasses="s1row" columns="3" columnClasses="wfcol1,wfcol2,wfcol3">
                        <h:outputText value="#{msg['fullName']}:" />
                        <h:inputText id="fn" value="#{orderManager.order.customerName}" label="#{msg['fullName']}" required="true" requiredMessage="#{msg['validator.messages.fullName']}" />
                        <rich:message for="fn"/>

                        <h:outputText value="#{msg['address']}" />
                        <h:inputText id="ln" value="#{orderManager.order.address}" label="#{msg['address']}" required="true" requiredMessage="#{msg['validator.messages.address']}" />
                        <rich:message for="ln" />

                        <div class="navPanel">
                            <h:commandButton style="float: right; height: 20px"  value="#{msg['toOrder']}" action="#{orderManager.saveOrder}"/>
                        </div>
                    </h:panelGrid>
                </rich:panel>
            </div>

        </h:form>
        <h:form>
            <h:panelGrid columns="2">
                Language :
                <h:selectOneMenu value="#{languageManager.localeCode}" onchange="submit()"
                                 valueChangeListener="#{languageManager.countryLocaleCodeChanged}">
                    <f:selectItems value="#{languageManager.countriesInMap}" />
                </h:selectOneMenu>
            </h:panelGrid>
        </h:form>
    </h:body>
</html>

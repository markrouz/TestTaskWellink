<?xml version = '1.0' encoding = 'UTF-8' ?>
<html xmlns = "http://www.w3.org/1999/xhtml"
      xmlns:h = "http://java.sun.com/jsf/html"
      xmlns:f = "http://java.sun.com/jsf/core"
      xmlns:ui = "http://java.sun.com/jsf/facelets"
      xmlns:a4j = "http://richfaces.org/a4j"
      xmlns:rich = "http://richfaces.org/rich">

    <h:head>
        <title>#{msg['application.name']}</title>
    </h:head>

    <h:body>
        <h:form>

            <div style="position: relative; display: inline-block" >

                <rich:panel header="#{msg['yourOrder']}" style="float: right">

                    <rich:dataTable value = "#{orderManager.order.orderPositions}" var = "orderPosition">

                        <rich:column>
                            <f:facet name = "header">#{msg['name']}</f:facet>
                            <h:outputText value = "#{orderPosition.coffee.name}"/>
                        </rich:column>

                        <rich:column>
                            <f:facet name = "header">#{msg['price']}</f:facet>
                            <h:outputText value = "#{orderPosition.coffee.price}"/>
                        </rich:column>

                        <rich:column>
                            <f:facet name="header">#{msg['quantity']}</f:facet>
                            <h:outputText value="#{orderPosition.numberOfCups}"/>
                        </rich:column>

                        <rich:column>
                            <f:facet name="header">#{msg['total']}</f:facet>
                            <h:outputText value="#{orderPosition.orderPositionPrice}"/>
                        </rich:column>
                    </rich:dataTable>

                    <h:panelGrid columns="1" style="float: right;">
                        <h:outputText style="font-size: small" value="#{msg['sum']}: #{orderManager.orderPositionsPrice}"/>
                        <h:outputText style="font-size: small" value="#{msg['delivery']}: #{orderManager.orderPositionsPrice lt orderManager.x ? orderManager.deliveryPrice : msg['free']}"/>
                        <h:outputText style="font-size: small" value="#{msg.total}: #{orderManager.order.price}"/>
                    </h:panelGrid>
                </rich:panel>

                <rich:panel header="#{msg['delivery']}">
                    <h:panelGrid columns="3">
                        <h:outputText value="#{msg['fullName']}:" />
                        <h:inputText id="fn" value="#{orderManager.order.customerName}" label="#{msg['fullName']}" required="true" requiredMessage="#{msg['validator.messages.fullName']}" />
                        <rich:message for="fn"/>

                        <h:outputText value="#{msg['address']}" />
                        <h:inputText id="ln" value="#{orderManager.order.address}" label="#{msg['address']}" required="true" requiredMessage="#{msg['validator.messages.address']}" />
                        <rich:message for="ln" />

                        <div class="navPanel">
                            <h:commandButton style="float: right; height: 20px"  value="#{msg['toOrder']}" action="#{orderManager.saveOrder}"/>
                        </div>
                    </h:panelGrid>
                </rich:panel>
            </div>

        </h:form>
        <h:form>
            <h:panelGrid columns="2">
                Language :
                <h:selectOneMenu value="#{languageManager.localeCode}" onchange="submit()"
                                 valueChangeListener="#{languageManager.countryLocaleCodeChanged}">
                    <f:selectItems value="#{languageManager.countriesInMap}" />
                </h:selectOneMenu>
            </h:panelGrid>
        </h:form>
    </h:body>
</html>
